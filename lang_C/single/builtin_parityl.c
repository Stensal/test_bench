#include <assert.h>

static int __attribute__((noinline)) parityl(unsigned long x)
{
	return __builtin_parityl(x);
}

int main(void)
{
#define ASSERTPARITYL(val, result) \
	assert(__builtin_parityl(val) == result); \
	assert(parityl(val) == result);

	ASSERTPARITYL(0x00000000UL, 0);
	ASSERTPARITYL(0x00000001UL, 1);
	ASSERTPARITYL(0x00003000UL, 0);
	ASSERTPARITYL(0x00000031UL, 1);
	ASSERTPARITYL(0x00002222UL, 0);
	ASSERTPARITYL(0x00001055UL, 1);
	ASSERTPARITYL(0x00006116UL, 0);
	ASSERTPARITYL(0x00007107UL, 1);
	ASSERTPARITYL(0x00008778UL, 0);
	ASSERTPARITYL(0x00007999UL, 1);
	ASSERTPARITYL(0x0000FFA0UL, 0);
	ASSERTPARITYL(0x00007FCCUL, 1);
	ASSERTPARITYL(0x0000CFFCUL, 0);
	ASSERTPARITYL(0x00007CFFUL, 1);
	ASSERTPARITYL(0x00007FFEUL, 0);
	ASSERTPARITYL(0x0000F7FFUL, 1);
	ASSERTPARITYL(0x0000FFFFUL, 0);
	ASSERTPARITYL(0xFFFF0001UL, 1);
	ASSERTPARITYL(0xFFFF3000UL, 0);
	ASSERTPARITYL(0xFFFF0031UL, 1);
	ASSERTPARITYL(0xFFFF2222UL, 0);
	ASSERTPARITYL(0xFFFF1055UL, 1);
	ASSERTPARITYL(0xFFFF6116UL, 0);
	ASSERTPARITYL(0xFFFF7107UL, 1);
	ASSERTPARITYL(0xFFFF8778UL, 0);
	ASSERTPARITYL(0x7999FFFFUL, 1);
	ASSERTPARITYL(0xFFA0FFFFUL, 0);
	ASSERTPARITYL(0x7FCCFFFFUL, 1);
	ASSERTPARITYL(0xCFFCFFFFUL, 0);
	ASSERTPARITYL(0x7CFFFFFFUL, 1);
	ASSERTPARITYL(0x7FFEFFFFUL, 0);
	ASSERTPARITYL(0xF7FFFFFFUL, 1);
	ASSERTPARITYL(0xFFFFFFFFUL, 0);
	ASSERTPARITYL((unsigned long)-1L, 0);
	ASSERTPARITYL((unsigned long)-2L, 1);
	return 0;
}
