#include <assert.h>

static int __attribute__((noinline)) ctzl(unsigned long x)
{
	return __builtin_ctzl(x);
}

int main(void)
{
#define ASSERTCTZL(val, result) \
	assert(__builtin_ctzl(val) == result); \
	assert(ctzl(val) == result);

	ASSERTCTZL(0x00000001UL, 0);
	ASSERTCTZL(0x00000002UL, 1);
	ASSERTCTZL(0x00000004UL, 2);
	ASSERTCTZL(0x00000008UL, 3);
	ASSERTCTZL(0x00000010UL, 4);
	ASSERTCTZL(0x00000020UL, 5);
	ASSERTCTZL(0x00000040UL, 6);
	ASSERTCTZL(0x00000080UL, 7);
	ASSERTCTZL(0x00000100UL, 8);
	ASSERTCTZL(0x00000200UL, 9);
	ASSERTCTZL(0x00000400UL, 10);
	ASSERTCTZL(0x00000800UL, 11);
	ASSERTCTZL(0x00001000UL, 12);
	ASSERTCTZL(0x00002000UL, 13);
	ASSERTCTZL(0x00004000UL, 14);
	ASSERTCTZL(0x00008000UL, 15);
	ASSERTCTZL(0x00010000UL, 16);
	ASSERTCTZL(0x00020000UL, 17);
	ASSERTCTZL(0x00040000UL, 18);
	ASSERTCTZL(0x00080000UL, 19);
	ASSERTCTZL(0x00100000UL, 20);
	ASSERTCTZL(0x00200000UL, 21);
	ASSERTCTZL(0x00400000UL, 22);
	ASSERTCTZL(0x00800000UL, 23);
	ASSERTCTZL(0x01000000UL, 24);
	ASSERTCTZL(0x02000000UL, 25);
	ASSERTCTZL(0x04000000UL, 26);
	ASSERTCTZL(0x08000000UL, 27);
	ASSERTCTZL(0x10000000UL, 28);
	ASSERTCTZL(0x20000000UL, 29);
	ASSERTCTZL(0x40000000UL, 30);
	ASSERTCTZL(0x80000000UL, 31);
	ASSERTCTZL((unsigned long)-1L, 0);
}
